{"version":3,"file":"index.es.js","sources":["../src/index.ts"],"sourcesContent":["/* Copyright 2021, Milkdown by Mirone. */\nimport { themeToolCtx } from '@milkdown/core';\nimport { dropCursor, gapCursor } from '@milkdown/prose';\nimport { createPlugin } from '@milkdown/utils';\n\nexport const cursor = createPlugin((utils) => {\n    utils.getStyle((themeTool, { injectGlobal }) => {\n        const css = injectGlobal;\n        css`\n            /* copy from https://github.com/ProseMirror/prosemirror-gapcursor/blob/master/style/gapcursor.css */\n            .ProseMirror-gapcursor {\n                display: none;\n                pointer-events: none;\n                position: absolute;\n                margin: 0 !important;\n            }\n\n            .ProseMirror-gapcursor:after {\n                content: '';\n                display: block;\n                position: absolute;\n                top: -2px;\n                width: 20px;\n                border-top: ${themeTool.size.lineWidth} solid ${themeTool.palette('secondary')};\n                animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n            }\n\n            @keyframes ProseMirror-cursor-blink {\n                to {\n                    visibility: hidden;\n                }\n            }\n\n            .ProseMirror-focused .ProseMirror-gapcursor {\n                display: block;\n            }\n        `;\n    });\n\n    return {\n        prosePlugins: (_, ctx) => {\n            const themeTool = ctx.get(themeToolCtx);\n\n            const lineWidth = themeTool.size.lineWidth;\n            const width = Number(lineWidth?.match(/\\d+/)?.[0] ?? 1);\n\n            return [gapCursor(), dropCursor({ color: themeTool.palette('secondary'), width })];\n        },\n    };\n})();\n"],"names":[],"mappings":";;;MAKa,SAAS,aAAa,CAAC,UAAU;QACpC,SAAS,CAAC,WAAW,EAAE,mBAAmB;UACtC,MAAM;;;;;;;;;;;;;;;;8BAgBU,UAAU,KAAK,mBAAmB,UAAU,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;SAgBvE;AAAA,IACH,cAAc,CAAC,GAAG,QAAQ;;YAChB,YAAY,IAAI,IAAI;YAEpB,YAAY,UAAU,KAAK;YAC3B,QAAQ,OAAO,mDAAW,MAAM,WAAjB,mBAA0B,OAA1B,YAAgC;aAE9C,CAAC,aAAa,WAAW,EAAE,OAAO,UAAU,QAAQ,cAAc;AAAA;AAAA;AAAA;;"}